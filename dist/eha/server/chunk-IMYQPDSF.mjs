import './polyfills.server.mjs';
import{a as R}from"./chunk-KXUBQWTO.mjs";import{b,d as p,f as h,g as y,h as P,i as V,k as x,l as T,m as I,o as M,p as N}from"./chunk-O5OFBI32.mjs";import{l as w}from"./chunk-JJTOLLRI.mjs";import"./chunk-3E4TOBEZ.mjs";import{m as _,t as F,w as C}from"./chunk-ALSAN5KH.mjs";import{Gb as u,Pb as o,Ta as n,Ua as m,Xb as E,Zb as S,ba as f,jb as v,nb as d,sb as s,wa as g,wb as t,xb as a}from"./chunk-QYIFABBK.mjs";import"./chunk-VVCT4QZE.mjs";var O=i=>({"is-invalid":i});function j(i,c){i&1&&(t(0,"p",11)(1,"small"),o(2,"email is required*"),a()())}function q(i,c){i&1&&(t(0,"p",11)(1,"small"),o(2,"please enter a valid email*"),a()())}function G(i,c){i&1&&(t(0,"p",11)(1,"small"),o(2,"this email doesn't exist*"),a()())}var W=(()=>{class i{constructor(r,l,e){this._PrivacySettingsService=r,this._Router=l,this._PLATFORM_ID=e,this.startValidation=!1,this.isValidEmail=!1,this.userForm=new P({email:new V("",[p.required,p.email])})}onSendOtpClick(){this.startValidation=!0,this.userForm.valid&&this._PrivacySettingsService.resetUserCode(this.userForm.value).subscribe({next:r=>{console.log(r),r.success?(C(this._PLATFORM_ID)&&localStorage.setItem("email",JSON.stringify(this.userForm.value.email)),this._Router.navigate(["/login/otp"])):this.isValidEmail=!0},error:r=>{console.log(r)}})}get email(){return this.userForm.get("email")}static{this.\u0275fac=function(l){return new(l||i)(m(R),m(w),m(g))}}static{this.\u0275cmp=f({type:i,selectors:[["app-email-forget-password"]],standalone:!0,features:[E],decls:27,vars:7,consts:[[1,"p-3",3,"ngSubmit","formGroup"],[1,"mb-4"],[1,"border-4","border-bottom"],[1,"row","g-3"],[1,"col-12"],[1,"d-flex","justify-content-between"],["for","userEmail",1,"form-label","fw-semibold","text-dark","text-opacity-75","mb-1"],[1,"text-danger"],[1,"text-danger","fst-italic","d-none","fw-bold"],["type","email","placeholder","name@example.com","name","userEmail","id","userEmail","autocomplete","email","formControlName","email",1,"form-control",3,"focus","ngClass"],[1,"fst-italic","fw-bold","text-dark","text-opacity-25"],[1,"text-danger","fst-italic","fw-bold"],[1,"text-center"],[1,"btn","btn-secondary","px-5","py-2"]],template:function(l,e){l&1&&(t(0,"form",0),u("ngSubmit",function(){return e.onSendOtpClick()}),t(1,"h3",1)(2,"span",2),o(3,"Rest password"),a()(),t(4,"div",3)(5,"div",4)(6,"div")(7,"div",5)(8,"label",6),o(9,"please enter your email address:"),t(10,"span",7),o(11,"*"),a()(),t(12,"small",8),o(13,"required*"),a(),t(14,"small",8),o(15,"not valid email*"),a()(),t(16,"input",9),u("focus",function(){return e.isValidEmail=!1,e.startValidation=!1}),a(),t(17,"small",10),o(18,"you will receive an email to reset your password"),a()()(),t(19,"div",4)(20,"div"),v(21,j,3,0,"p",11)(22,q,3,0,"p",11)(23,G,3,0,"p",11),a(),t(24,"div",12)(25,"button",13),o(26,"send email"),a()()()()()),l&2&&(d("formGroup",e.userForm),n(16),d("ngClass",S(5,O,((e.email==null?null:e.email.getError("required"))||(e.email==null?null:e.email.getError("email")))&&e.startValidation||e.isValidEmail)),n(5),s(21,e.email!=null&&e.email.getError("required")&&e.startValidation?21:-1),n(),s(22,e.email!=null&&e.email.getError("email")&&e.startValidation?22:-1),n(),s(23,e.isValidEmail?23:-1))},dependencies:[N,x,b,h,y,T,I,M,F,_]})}}return i})();export{W as EmailForgetPasswordComponent};
