import './polyfills.server.mjs';
import{g as ee,h as ie}from"./chunk-FCIQNDRR.mjs";import"./chunk-4W4XXWLY.mjs";import{a as te}from"./chunk-QMYGRYA7.mjs";import{a as ne}from"./chunk-36HCJA7L.mjs";import{a as X,b as Z}from"./chunk-ON5PZMWI.mjs";import{a as Y}from"./chunk-B4BET5RO.mjs";import"./chunk-EM75C6OI.mjs";import{a as Q}from"./chunk-4JHSBOBF.mjs";import{b as $,f as q,j as J,o as K}from"./chunk-O5OFBI32.mjs";import"./chunk-COOKNSSU.mjs";import{m as z}from"./chunk-JJTOLLRI.mjs";import"./chunk-3E4TOBEZ.mjs";import{m as R,r as V,s as N,t as H,w as U}from"./chunk-ALSAN5KH.mjs";import{Cb as I,Gb as g,Hb as f,Na as G,Pb as l,Qb as O,Rb as w,Ta as s,Tb as F,Ua as u,Ub as L,Vb as E,Xb as j,Yb as W,Zb as h,ba as S,dc as c,ea as y,ec as P,fc as C,gc as D,jb as b,ka as k,la as v,nb as m,sb as x,tb as T,ub as A,vb as B,wa as M,wb as n,xb as r,yb as p}from"./chunk-QYIFABBK.mjs";import"./chunk-VVCT4QZE.mjs";var oe=(()=>{class i{transform(e,o){return e.filter(t=>t.article_title.toLocaleLowerCase().includes(o.toLocaleLowerCase()))}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275pipe=y({name:"searchGuideline",type:i,pure:!0,standalone:!0})}}return i})();var se=()=>[8,16,32],le=i=>["/articles",i],re=i=>({"d-none":i});function de(i,_){i&1&&(n(0,"div",21)(1,"div",22)(2,"p",23),l(3,"No Guidelines Found"),r()()())}function ce(i,_){if(i&1){let e=I();n(0,"div",21)(1,"div",22)(2,"p",23),l(3),r()(),n(4,"div",24),p(5,"p",25),c(6,"stringTrim"),n(7,"a",26),l(8,"read more +"),r()(),n(9,"div",27)(10,"p",28),l(11),c(12,"date"),r(),n(13,"p",28),l(14),c(15,"date"),r(),n(16,"button",29),g("click",function(t){let a=k(e).$implicit,d=f(2);return v(d.addBookmark(a.id,t))}),p(17,"i",30),r(),n(18,"button",31),g("click",function(t){let a=k(e).$implicit,d=f(2);return v(d.removeBookmark(a.bookmark[0].id,t))}),p(19,"i",32),r()()()}if(i&2){let e=_.$implicit;s(3),O(e.article_title),s(2),m("innerHTML",C(6,7,e.article_text,150),G),s(2),m("routerLink",h(14,le,e.id)),s(4),w(" created: ",P(12,10,e.created_at)," "),s(3),w(" updated: ",P(15,12,e.updated_at)," "),s(2),m("ngClass",h(16,re,e.is_end)),s(2),m("ngClass",h(18,re,!e.is_end))}}function me(i,_){if(i&1&&(b(0,de,4,0,"div",21),c(1,"searchGuideline"),A(2,ce,20,20,"div",21,T),c(4,"searchGuideline"),c(5,"slice")),i&2){let e=f();x(0,C(1,1,e.AllGuidelines.articles,e.inputSearch).length==0?0:-1),s(2),B(D(5,7,C(4,4,e.AllGuidelines.articles,e.inputSearch),e.first,e.next))}}function pe(i,_){i&1&&(n(0,"div",21)(1,"div",22)(2,"p",23),l(3,"No Guidelines Found"),r()()())}var Be=(()=>{class i{constructor(e,o,t,a){this._GuidelineService=e,this._PLATFORM_ID=o,this._BookmarkService=t,this._ToastrService=a,this.inputSearch="",this.first=0,this.rows=10,this.next=10}ngOnInit(){this.getAllGuidLines()}getUserId(){return U(this._PLATFORM_ID)&&localStorage.getItem("userId")||""}getAllGuidLines(){this._GuidelineService.getAllGuidelines(this.getUserId()).subscribe({next:e=>{this.AllGuidelines=e,console.log(e)},error:e=>{console.log(e)}})}addBookmark(e,o){o.stopPropagation();let t={user_id:+this.getUserId(),protocol_id:e,bookmark_type:"guideline"};console.log(t),this._BookmarkService.addBookmark(t).subscribe({next:a=>{this.getAllGuidLines(),this._ToastrService.success("Bookmark added"),console.log(a)},error:a=>{console.log(a)}})}removeBookmark(e,o){o.stopPropagation();let t={user_id:+this.getUserId(),bookmark_id:e};this._BookmarkService.deleteBookmark(t).subscribe({next:a=>{console.log(a),this._ToastrService.success("Bookmark removed"),this.getAllGuidLines()},error:a=>{console.log(a)}})}onPageChange(e){this.first=e.first,this.rows=e.rows,e.first+e.rows<this.AllGuidelines.articles.length?(this.first=e.first,this.rows=e.rows,this.next=this.first+e.rows):this.next=this.AllGuidelines.articles.length}static{this.\u0275fac=function(o){return new(o||i)(u(te),u(M),u(ne),u(Y))}}static{this.\u0275cmp=S({type:i,selectors:[["app-guidelines"]],standalone:!0,features:[j],decls:31,vars:7,consts:[["id","guideline"],[1,"text-white","shadow"],[1,"bg-black","bg-opacity-50","h-100"],[1,"container-lg","container-fluid","d-flex","justify-content-start","align-items-center","h-100"],[1,"text-uppercase","fs-1"],[1,"fa-regular","fa-paper-plane","ms-3"],["aria-label","breadcrumb",2,"--bs-breadcrumb-divider","'>'"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item"],[1,"fa-solid","fa-house","me-1"],["aria-current","page",1,"breadcrumb-item","text-white","text-opacity-50"],[1,"my-4"],[1,"container"],[1,"row","g-0"],[1,"col-12","shadow","w-100","mb-4","bg-secondary","p-5"],[1,"form-floating","mb-3"],["type","search","id","floatingInput","placeholder","search articles...",1,"form-control",3,"ngModelChange","ngModel"],["for","floatingInput"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-lg-3","row-cols-xlg-4","min-h-50vh","align-items-start"],[1,"flex","justify-content-center"],[3,"onPageChange","first","rows","totalRecords","rowsPerPageOptions"],[1,"card","border-0","bg-light","shadow-sm","position-relative","card__animation"],[1,"card-title","p-3","pb-0","fs-4"],[1,"fw-semibold"],[1,"card-body"],[1,"fw-bold",3,"innerHTML"],[1,"text-main","font__titls",3,"routerLink"],[1,"d-flex","justify-content-between","card-footer"],[1,"text-muted","fst-italic","mb-0",2,"font-size","12px"],["pTooltip","Add Book Mark","tooltipPosition","top",1,"w-45","position-absolute","top-0","end-0","m-3","btn","text-secondary",3,"click","ngClass"],[1,"fa-regular","fa-bookmark","fs-4"],["pTooltip","Remove From Mark","tooltipPosition","top",1,"w-45","position-absolute","top-0","end-0","m-3","btn","text-secondary",3,"click","ngClass"],[1,"fa-solid","fa-bookmark","fs-4"]],template:function(o,t){o&1&&(n(0,"section",0)(1,"header",1)(2,"div",2)(3,"div",3)(4,"div")(5,"div")(6,"h2",4),l(7," Articles "),p(8,"i",5),r()(),n(9,"div")(10,"nav",6)(11,"ol",7)(12,"li",8),p(13,"i",9),l(14," Home "),r(),n(15,"li",10),l(16," Articles "),r()()()()()()()(),n(17,"div",11)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"input",16),E("ngModelChange",function(d){return L(t.inputSearch,d)||(t.inputSearch=d),d}),r(),n(23,"label",17),l(24,"Search Guidelines"),r()()()(),n(25,"div")(26,"div",18),b(27,me,6,11)(28,pe,4,0),r()(),n(29,"div",19)(30,"p-paginator",20),g("onPageChange",function(d){return t.onPageChange(d)}),r()()()()()),o&2&&(s(22),F("ngModel",t.inputSearch),s(5),x(27,t.AllGuidelines?27:28),s(3),m("first",t.first)("rows",t.rows)("totalRecords",t.AllGuidelines.articles.length)("rowsPerPageOptions",W(6,se)))},dependencies:[Z,X,Q,z,V,H,R,N,K,$,q,J,oe,ie,ee],styles:["#guideline[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{height:50vh;background-image:url(/assets/rev/4.jpg);background-position:top center;background-size:cover;transform:translateY(10px);opacity:0;animation:_ngcontent-%COMP%_Welcome__Animation 1s forwards}#guideline[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{transform:translate(-3000px);opacity:0;animation:_ngcontent-%COMP%_Welcome__Content__Animation 1s forwards}#guideline[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{transform:translate(-3000px);opacity:0;animation:_ngcontent-%COMP%_Welcome__Content__Animation 1s .3s forwards}@keyframes _ngcontent-%COMP%_Welcome__Animation{0%{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_Welcome__Content__Animation{0%{transform:translate(-3000px);opacity:0}to{transform:translate(0);opacity:1}}.breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{color:#fff}"]})}}return i})();export{Be as GuidelinesComponent};
