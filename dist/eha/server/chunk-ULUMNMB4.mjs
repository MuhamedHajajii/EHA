import './polyfills.server.mjs';
import{a as X}from"./chunk-W4MXG5US.mjs";import{g as J,h as K}from"./chunk-FCIQNDRR.mjs";import"./chunk-4W4XXWLY.mjs";import{a as Q}from"./chunk-36HCJA7L.mjs";import"./chunk-ON5PZMWI.mjs";import"./chunk-GIULMYYP.mjs";import{a as W}from"./chunk-B4BET5RO.mjs";import"./chunk-EM75C6OI.mjs";import{b as G,f as $,j as z,o as q}from"./chunk-O5OFBI32.mjs";import"./chunk-COOKNSSU.mjs";import{l as A}from"./chunk-JJTOLLRI.mjs";import"./chunk-3E4TOBEZ.mjs";import{m as j,s as V,t as D,w as N}from"./chunk-ALSAN5KH.mjs";import{Cb as C,Gb as y,Hb as _,Pb as p,Rb as k,Sb as O,Ta as a,Tb as T,Ua as l,Ub as F,Vb as B,Xb as U,Yb as E,_b as L,ba as w,dc as g,ea as x,fc as v,gc as R,jb as u,ka as f,la as h,nb as m,sb as P,tb as S,ub as I,vb as b,wa as H,wb as n,xb as s,yb as M}from"./chunk-QYIFABBK.mjs";import"./chunk-VVCT4QZE.mjs";var Y=(()=>{class o{transform(t,e){return t.filter(i=>i.title.toLocaleLowerCase().includes(e.toLocaleLowerCase()))}static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275pipe=x({name:"searchProtocolsHistory",type:o,pure:!0,standalone:!0})}}return o})();var tt=()=>[8,16,32],ot=(o,c)=>({"border-bottom":o,"border-end":c});function et(o,c){o&1&&(n(0,"div",7)(1,"div",12)(2,"p",13),p(3,"No Protocols Found"),s()()())}function it(o,c){if(o&1){let t=C();n(0,"div",14),y("click",function(){let i=f(t).$implicit,r=_(2);return h(r.onClickGetSpecificHistory(i.protocol_id))}),M(1,"img",15),n(2,"p",16),p(3),s(),n(4,"p",17),p(5),s()()}if(o&2){let t=c.$implicit,e=c.$index;m("ngClass",L(5,ot,e<4,e!==3&&e!==7)),a(),m("alt",t.title),a(2),O(" ",t.title," ",t.protocol_id," "),a(2),k(" ",t.sub_category_name," ")}}function rt(o,c){if(o&1){let t=C();u(0,et,4,0,"div",7),g(1,"searchProtocolsHistory"),n(2,"div",8),I(3,it,6,8,"div",9,S),g(5,"searchProtocolsHistory"),g(6,"slice"),s(),n(7,"div",10)(8,"p-paginator",11),y("onPageChange",function(i){f(t);let r=_();return h(r.onPageChange(i))}),s()()}if(o&2){let t=_();P(0,v(1,5,t.IProtocolHisory.Historys,t.inputSearch).length==0?0:-1),a(3),b(R(6,11,v(5,8,t.IProtocolHisory.Historys,t.inputSearch),t.first,t.next)),a(5),m("first",t.first)("rows",t.rows)("totalRecords",t.IProtocolHisory.Historys.length)("rowsPerPageOptions",E(15,tt))}}function nt(o,c){o&1&&(n(0,"div",7)(1,"div",12)(2,"p",13),p(3,"No Protocols Found"),s()()())}var vt=(()=>{class o{constructor(t,e,i,r,d){this._HistoryProtocolsService=t,this._PLATFORM_ID=e,this._BookmarkService=i,this._ToastrService=r,this._Router=d,this.inputSearch="",this.first=0,this.rows=10,this.next=10}ngOnInit(){this.getPatientHistory()}getUserId(){if(N(this._PLATFORM_ID))return localStorage.getItem("userId")||""}getPatientHistory(){this._HistoryProtocolsService.getProtocolsHistory(this.getUserId()).subscribe({next:t=>{this.IProtocolHisory=t,console.log(t)},error:t=>{console.log(t)}})}removeBookmark(t,e){e.stopPropagation();let i={user_id:+this.getUserId(),bookmark_id:t};this._BookmarkService.deleteBookmark(i).subscribe({next:r=>{console.log(r),this._ToastrService.success("Bookmark removed")},error:r=>{console.log(r)}})}onClickGetSpecificHistory(t){console.log(t),this._Router.navigate(["/protocols/protocol-history",t])}onPageChange(t){this.first=t.first,this.rows=t.rows,t.first+t.rows<this.IProtocolHisory.Historys.length?(this.first=t.first,this.rows=t.rows,this.next=this.first+t.rows):this.next=this.IProtocolHisory.Historys.length}static{this.\u0275fac=function(e){return new(e||o)(l(X),l(H),l(Q),l(W),l(A))}}static{this.\u0275cmp=w({type:o,selectors:[["app-user-history"]],standalone:!0,features:[U],decls:10,vars:2,consts:[[1,"container-fluid"],[1,"py-5"],[1,"row","g-0"],[1,"col-12","shadow","w-100","mb-4","bg-secondary","p-5"],[1,"form-floating","mb-3"],["type","search","id","floatingInput","placeholder","search protocols...",1,"form-control",3,"ngModelChange","ngModel"],["for","floatingInput"],[1,"card","border-0","bg-light","shadow-sm","position-relative","card__animation"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","row-cols-lg-4","min-h-50vh","align-items-start"],[1,"text-center","bg-light","p-5","Protocol__Card","position-relative","card__animation",3,"ngClass"],[1,"flex","justify-content-center"],[3,"onPageChange","first","rows","totalRecords","rowsPerPageOptions"],[1,"card-title","p-3","pb-0","fs-4"],[1,"fw-semibold"],[1,"text-center","bg-light","p-5","Protocol__Card","position-relative","card__animation",3,"click","ngClass"],["src","./assets/app_logo.png",1,"w-85","mx-auto","mb-3",3,"alt"],[1,"fs-6","text-secondary","fw-bold"],[1,"fs-6","text-secondary"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"input",5),B("ngModelChange",function(d){return F(i.inputSearch,d)||(i.inputSearch=d),d}),s(),n(6,"label",6),p(7,"Search Protocols"),s()()(),u(8,rt,9,16)(9,nt,4,0),s()()()),e&2&&(a(5),T("ngModel",i.inputSearch),a(3),P(8,i.IProtocolHisory?8:9))},dependencies:[D,j,V,q,G,$,z,Y,K,J],styles:[".Protocol__Card[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]::selection{background-color:transparent}.Protocol__Card[_ngcontent-%COMP%]{overflow-x:auto;cursor:pointer;transition:all .3s}.Protocol__Card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:all .3s}.Protocol__Card[_ngcontent-%COMP%]:hover{box-shadow:0 0 3px #14457b inset;z-index:1;background-color:#fff!important}.Protocol__Card[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.1)}.Protocol__Card[_ngcontent-%COMP%]:hover   p[_ngcontent-%COMP%]{text-decoration:underline}"]})}}return o})();export{vt as UserHistoryComponent};
