import{a as Z,b as ee,c as te,d as re,e as ie,f as ne}from"./chunk-VYSVMM2L.js";import{a as Y}from"./chunk-YGK54RN3.js";import{b as H,d as m,f as J,g as W,h as $,i as c,k as z,l as K,m as Q,p as X}from"./chunk-6I7XQ6OV.js";import{a as B}from"./chunk-CEWKWK6U.js";import{h as q,i as G}from"./chunk-GS7ZRR4M.js";import{A as R,k as U,r as M,t as F}from"./chunk-WDQTWRWB.js";import{Ab as L,Eb as P,Nb as o,Ra as a,S as A,Sa as f,Vb as x,X as D,Xb as h,Yb as j,ba as N,hb as S,ka as k,la as T,lb as g,qb as d,ub as n,vb as r,wa as O,wb as s}from"./chunk-IYQR6SBG.js";var oe=(()=>{class t{constructor(i){this._HttpClient=i}updateUserAccount(i){let l=new FormData;return Object.keys(i).forEach(e=>{l.append(e,i[e])}),this._HttpClient.post(`${B}updateUserProfile`,l)}static{this.\u0275fac=function(l){return new(l||t)(D(R))}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var y=t=>({"is-invalid":t}),se=t=>[t],me=(t,u)=>[t,u];function ue(t,u){t&1&&(n(0,"small",8),o(1,"Please fill the field*"),r())}function de(t,u){t&1&&(n(0,"small",8),o(1,"min length 3 characters*"),r())}function ce(t,u){t&1&&(n(0,"small",8),o(1,"Please fill the field*"),r())}function pe(t,u){t&1&&(n(0,"small",8),o(1,"min length 3 characters*"),r())}function ge(t,u){t&1&&(n(0,"small",8),o(1,"Please fill the field*"),r())}function fe(t,u){t&1&&(n(0,"small",8),o(1,"min length 3 characters*"),r())}var Ne=(()=>{class t{constructor(i,l,e,p){this._PLATFORM_ID=i,this._Router=l,this._ToastrService=e,this._UpdateAccountService=p,this.errorMessage="",this.SearchCountryField=ee,this.CountryISO=Z,this.startValidation=!1,this.PhoneNumberFormat=te,this.userForm=new $({name:new c("",[m.required,m.minLength(3)]),email:new c({value:"",disabled:!0}),address:new c("",[m.required,m.minLength(3)]),user_id:new c("",[m.required]),phone:new c({value:"",disabled:!0}),user_full_work_address:new c("",[m.required,m.minLength(3)])})}ngOnInit(){if(F(this._PLATFORM_ID)){let i=localStorage.getItem("userDetails");i&&(this.userDetails=JSON.parse(i),this.setValues())}this.userForm.get("name")}onSubmitUpdateUserData(){this.startValidation=!0,this.userForm.valid&&this._UpdateAccountService.updateUserAccount(this.userForm.value).subscribe({next:i=>{console.log(i),F(this._PLATFORM_ID)&&localStorage.setItem("userDetails",JSON.stringify(i.user)),localStorage.setItem("userName",JSON.stringify(i.user.name)),this._ToastrService.success("Account updated successfully"),this.userForm.get("user_full_work_address")?.setValue(i.user.user_full_work_address),this.userForm.get("name")?.setValue(i.user.name),this.userForm.get("address")?.setValue(i.user.address)},error:i=>{console.log(i)}})}setValues(){this.userForm.get("name")?.setValue(this.userDetails.name),this.userForm.get("email")?.setValue(this.userDetails.email),this.userForm.get("address")?.setValue(this.userDetails.address),this.userForm.get("user_id")?.setValue(this.userDetails.id),this.userForm.get("phone")?.setValue(this.userDetails.phone),this.userForm.get("user_full_work_address")?.setValue(this.userDetails.user_full_work_address),console.log(this.userDetails.name,this.userDetails.email,this.userDetails.address,this.userDetails.id,this.userDetails.user_full_work_address)}isLoggedIn(){F(this._PLATFORM_ID)&&(localStorage.getItem("token")||(this._ToastrService.show("you are logged in"),this._Router.navigate(["/"])))}static{this.\u0275fac=function(l){return new(l||t)(f(O),f(q),f(Y),f(oe))}}static{this.\u0275cmp=N({type:t,selectors:[["app-change-account-settings"]],standalone:!0,features:[x],decls:55,vars:31,consts:[["phone",""],[1,"p-3",3,"ngSubmit","formGroup"],[1,"mb-4"],[1,"border-4","border-bottom"],[1,"row","g-3"],[1,"mb-3"],[1,"d-flex","justify-content-between","align-items-center"],["for","name",1,"form-label"],[1,"text-danger","fst-italic"],["type","text","id","name","placeholder","Enter Your Name","formControlName","name",1,"form-control",3,"ngClass"],[1,"col-12"],["for","email",1,"form-label"],[1,"pi","pi-lock"],["type","email","id","email","formControlName","email","placeholder","Enter Your Email","formControlName","email",1,"form-control"],["for","phone"],["name","phone","formControlName","phone",3,"cssClass","preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","phoneValidation"],[1,"col-md-12"],[1,"d-flex","justify-content-between","alignitemc"],["for","address"],["placeholder","Leave a comment here","id","address","formControlName","address",1,"form-control",3,"ngClass"],["for","user_full_work_address"],["placeholder","work address","id","user_full_work_address","formControlName","user_full_work_address",1,"form-control",3,"ngClass"],[1,"col-md-12","d-flex","justify-content-between","align-items-center","flex-column","flex-md-row","gap-2"],[1,"btn-main","btn","px-4","title__fonts","fw-bold","rounded-1","py-3","px-5","text-uppercase","fs-14"],["routerLink","/settings/change-privacy",1,"text-decoration-none"]],template:function(l,e){if(l&1){let p=L();n(0,"form",1),P("ngSubmit",function(){return k(p),T(e.onSubmitUpdateUserData())}),n(1,"h3",2)(2,"span",3),o(3,"Account"),r()(),n(4,"div",4)(5,"div")(6,"div",5)(7,"div",6)(8,"label",7)(9,"span"),o(10,"Your Name:"),r()(),S(11,ue,2,0,"small",8)(12,de,2,0,"small",8),r(),s(13,"input",9),r()(),n(14,"div",10)(15,"div")(16,"div",5)(17,"label",11),o(18,"Your Email: "),s(19,"i",12),r(),s(20,"input",13),r()()(),n(21,"div",10)(22,"div")(23,"label",14),o(24,"Your Phone "),s(25,"i",12),r(),s(26,"ngx-intl-tel-input",15,0),r()(),n(28,"div",16)(29,"div")(30,"div",17)(31,"label",18),o(32,"Address:"),r(),S(33,ce,2,0,"small",8)(34,pe,2,0,"small",8),r(),n(35,"div")(36,"div",5),s(37,"input",19),r()()()(),n(38,"div",16)(39,"div")(40,"div",17)(41,"label",20),o(42,"Work Address:"),r(),S(43,ge,2,0,"small",8)(44,fe,2,0,"small",8),r(),n(45,"div")(46,"div",5),s(47,"input",21),r()()()(),n(48,"div",22)(49,"button",23),o(50," Update "),r(),n(51,"div")(52,"a",24),s(53,"i",12),o(54," privacy settings"),r()()()()()}if(l&2){let p,E,_,b,w,C,I,V,v;g("formGroup",e.userForm),a(11),d(11,(p=e.userForm.get("name"))!=null&&p.getError("required")&&e.startValidation?11:-1),a(),d(12,(E=e.userForm.get("name"))!=null&&E.getError("minlength")&&e.startValidation?12:-1),a(),g("ngClass",h(20,y,e.startValidation&&(((_=e.userForm.get("name"))==null?null:_.getError("required"))||((_=e.userForm.get("name"))==null?null:_.getError("minlength"))))),a(13),g("cssClass","form-control h-100 py-3")("preferredCountries",h(22,se,e.CountryISO.Egypt))("enableAutoCountrySelect",!1)("enablePlaceholder",!0)("searchCountryFlag",!0)("searchCountryField",j(24,me,e.SearchCountryField.Iso2,e.SearchCountryField.Name))("selectFirstCountry",!1)("selectedCountryISO",e.CountryISO.Egypt)("maxLength",15)("phoneValidation",!0),a(7),d(33,(b=e.userForm.get("address"))!=null&&b.getError("required")&&e.startValidation?33:-1),a(),d(34,(w=e.userForm.get("address"))!=null&&w.getError("minlength")&&e.startValidation?34:-1),a(3),g("ngClass",h(27,y,e.startValidation&&(((C=e.userForm.get("address"))==null?null:C.getError("required"))||((C=e.userForm.get("address"))==null?null:C.getError("minlength"))))),a(6),d(43,(I=e.userForm.get("user_full_work_address"))!=null&&I.getError("required")&&e.startValidation?43:-1),a(),d(44,(V=e.userForm.get("user_full_work_address"))!=null&&V.getError("minlength")&&e.startValidation?44:-1),a(3),g("ngClass",h(29,y,e.startValidation&&((v=e.userForm.get("user_full_work_address"))==null?null:v.getError("required"))||((v=e.userForm.get("user_full_work_address"))==null?null:v.getError("minlength"))))}},dependencies:[X,z,H,J,W,K,Q,M,U,ne,ie,re,G],styles:[".iti{width:100%}  input:disabled:hover,   input:disabled:focus{border:1px solid #f4f6f9!important;cursor:not-allowed!important}  input:disabled::selection{background-color:transparent!important;color:inherit!important}"]})}}return t})();export{Ne as a};
