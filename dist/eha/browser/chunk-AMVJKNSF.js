import{a as j}from"./chunk-RABS6FVZ.js";import{a as R}from"./chunk-YGK54RN3.js";import{b as D,d as c,f as N,g as P,h as O,i as g,k as A,l as G,m as U,p as q}from"./chunk-6I7XQ6OV.js";import{a as k}from"./chunk-CEWKWK6U.js";import"./chunk-SP6S2HTI.js";import{h as M,i as T}from"./chunk-GS7ZRR4M.js";import{A as L,k as E,r as y,t as p}from"./chunk-WDQTWRWB.js";import{Eb as I,Fb as C,Nb as o,Ob as x,Ra as l,S as v,Sa as a,Vb as w,X as S,Xb as u,ba as h,hb as b,lb as m,qb as F,ub as i,vb as r,wa as _,wb as d}from"./chunk-IYQR6SBG.js";import"./chunk-DM275RSA.js";var B=(()=>{class t{constructor(e){this._HttpClient=e}loginUser(e){return this._HttpClient.post(`${k}signin`,e)}static{this.\u0275fac=function(s){return new(s||t)(S(L))}}static{this.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var H=t=>({"is-invalid":t});function $(t,z){if(t&1&&(i(0,"p",14)(1,"small",16),o(2),r()()),t&2){let e=C();l(2),x(e.errorMessage)}}var le=(()=>{class t{constructor(e,s,n,f,V){this._LoginService=e,this._PLATFORM_ID=s,this._CookieService=n,this._Router=f,this._ToastrService=V,this.errorMessage="",this.userForm=new O({email:new g("",[c.required,c.email]),password:new g("",[c.required])})}ngOnInit(){this.isLoggedIn()}loginUser(){this._LoginService.loginUser(this.userForm.value).subscribe({next:e=>{p(this._PLATFORM_ID)&&(console.log(e,"from Error Outer"),e.error?(console.log(e,"from Error Message"),this.userForm.setErrors({invalidLogin:!0}),console.log(this.userForm.valid),this.errorMessage="Invalid email or password"):(console.log(e,"from Error Success"),this.errorMessage="",localStorage.setItem("token",e.access_token),localStorage.setItem("userName",e.user.name),localStorage.setItem("userDetails",JSON.stringify(e.user)),this._ToastrService.success("Login Successfully"),localStorage.setItem("userId",e.user.id.toString()),this._Router.navigate(["/"])))},error:e=>{console.log(e)}})}ngOnDestroy(){this.userForm.reset()}isLoggedIn(){p(this._PLATFORM_ID)&&localStorage.getItem("token")&&(this._ToastrService.show("you are logged in"),this._Router.navigate(["/"]))}static{this.\u0275fac=function(s){return new(s||t)(a(B),a(_),a(j),a(M),a(R))}}static{this.\u0275cmp=h({type:t,selectors:[["app-login-form"]],standalone:!0,features:[w],decls:34,vars:8,consts:[[1,"p-3",3,"ngSubmit","formGroup"],[1,"mb-4"],[1,"border-4","border-bottom"],[1,"row","g-3"],[1,"col-12"],[1,"d-flex","justify-content-between"],["for","userEmail",1,"form-label","fw-semibold","text-dark","text-opacity-75","mb-1"],[1,"text-danger"],[1,"text-danger","fst-italic","d-none","fw-bold"],["type","email","placeholder","name@example.com","name","userEmail","id","userEmail","autocomplete","email","formControlName","email",1,"form-control",3,"ngClass"],["for","userPassword",1,"form-label","fw-semibold","text-dark","text-opacity-75","mb-1"],["type","password","name","userPassword","id","userPassword","placeholder","***********","autocomplete","off","formControlName","password",1,"form-control",3,"ngClass"],[1,"text-center"],[1,"btn","btn-secondary","px-5","py-2"],[1,"py-3","text-center"],["routerLink","/login/reset",1,"btn","text-primary"],[1,"text-danger","fw-bold","fst-italic"]],template:function(s,n){s&1&&(i(0,"form",0),I("ngSubmit",function(){return n.loginUser()}),i(1,"h3",1)(2,"span",2),o(3,"Login"),r()(),i(4,"div",3)(5,"div",4)(6,"div")(7,"div",5)(8,"label",6),o(9,"Email:"),i(10,"span",7),o(11,"*"),r()(),i(12,"small",8),o(13,"required*"),r(),i(14,"small",8),o(15,"not valid email*"),r()(),d(16,"input",9),r()(),i(17,"div",4)(18,"div")(19,"div",5)(20,"label",10),o(21,"Password:"),i(22,"span",7),o(23,"*"),r()()(),d(24,"input",11),r()(),i(25,"div",4)(26,"div",12)(27,"button",13),o(28,"LogIn"),r(),b(29,$,3,1,"p",14),r()()()(),i(30,"div")(31,"p")(32,"button",15),o(33," forget password? "),r()()()),s&2&&(m("formGroup",n.userForm),l(16),m("ngClass",u(4,H,n.userForm.invalid&&n.errorMessage.length>0)),l(8),m("ngClass",u(6,H,n.userForm.invalid&&n.errorMessage.length>0)),l(5),F(29,n.userForm.invalid&&n.errorMessage.length>0?29:-1))},dependencies:[q,A,D,N,P,G,U,y,E,T]})}}return t})();export{le as LoginFormComponent};
